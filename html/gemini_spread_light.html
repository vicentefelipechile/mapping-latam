<head><style>
body{background-color:#022933;margin:0;overflow:hidden}.gemini-container{display:flex;flex-direction:row;flex-wrap:wrap;align-content:center;justify-content:space-evenly;width:100%;height:100%}.gemini-square{width:12px;height:12px;border-radius:3px;background-color:#fff;margin:2px;transition:background-color 0.26s}
</style></head><body><div class="gemini-container"></div><script>
const FL = Math.floor
const MI = Math.min
const MA = Math.max
const Range = (M, X) => FL(Math.random() * (M - X + 1) + X)

// Ranges
let T = 0.5
let K = 30
let P = 0.5

// Calculate the number of squares needed to fill the screen in width and height
let W = FL(window.innerWidth / 16)
let H = MI( FL(window.innerHeight / 18), 10)

function GT() {
    // Delta number between 0 to temperature
    return Math.random() * T
}

function GC(I) {
    // Select the color based on the intensity
    let r = FL(30 - I * 10)
    let g = FL(70 - I * 40)
    let b = FL(110 - I * 60)

    return `rgb(${r}, ${g}, ${b})`
}

function G2(I) { // This color is based on Temperature
    let r = FL(30 - I * 20)
    let g = FL(245 - I * 25)
    let b = FL(60 - I * 30)

    return `rgb(${r}, ${g}, ${b})`
}

function G3(I) { // This color is based on Top P
    let r = FL(30 - I * 20)
    let g = FL(140 - I * 50)
    let b = FL(50 - I * 30)

    return `rgb(${r}, ${g}, ${b})`
}




// Square functions

function R() {
    let SQ = document.querySelectorAll(".gemini-square")
    for (let i = 0; i < SQ.length; i++) {
        let Q = SQ[i]
        Q.style.backgroundColor = GC(GT())
    }
}

function GS() {
    // Clear the container
    const C = document.querySelector(".gemini-container")
    C.innerHTML = ""

    // Create the squares
    for (let i = 0; i < W; i++) {
        for (let j = 0; j < H; j++) {
            let Q = document.createElement("div")
            Q.classList.add("gemini-square")
            Q.style.backgroundColor = `rgb(10, 20, 40)`
            C.appendChild(Q)
        }
        let B = document.createElement("br")
        C.appendChild(B)
    }

    R()
}


function GH() {
    let A = FL((W * H) * (K / 100) )
    let AN = FL(A * P)
    let AP = MA(A - AN, 1)

    let SQ = document.querySelectorAll(".gemini-square")
    let UQ = []
    for (let i = 0; i < AN; i++) {
        let Q = SQ[ Range(0, SQ.length - 1) ]
        Q.style.backgroundColor = G2(GT())

        UQ.push(Q)
    }

    // remove the used squares
    SQ = Array.from(SQ).filter( (Q) => !UQ.includes(Q) )

    for (let i = 0; i < AP; i++) {
        let Q = SQ[ Range(0, SQ.length - 1) ]
        Q.style.backgroundColor = G3(GT())
    }
}

GS()
GH()

function SetTemperature(V) {
    T = parseFloat(V)
    R()
    GH()
}

function SetTopK(V) {
    K = parseInt(V)
    R()
    GH()
}

function SetTopP(V) {
    P = parseFloat(V)
    R()
    GH()
}

function SetResolution(NW, NH) {
    W = FL(parseInt(NW)/16)
    H = FL(parseInt(NH)/2)
    GS()
    GH()
}
</script></body>